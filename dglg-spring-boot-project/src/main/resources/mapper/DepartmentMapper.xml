<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dglg.spring.dao.DepartmentDao">

    <resultMap id="departmentMap" type="Department">
        <id property="deptno" column="deptno"/>
        <result property="dname" column="dname"/>
        <result column="loc" property="location"/>
        <collection property="employees" ofType="Employee">
            <id property="empno" column="empno"/>
            <result property="ename" column="ename"/>
            <result column="job" property="job"/>
            <result column="mgr" property="mgr"/>
            <result column="hiredate" property="hiredate"/>
            <result column="sal" property="sal"/>
            <result column="comm" property="comm"/>
        </collection>
    </resultMap>

    <select id="getDepartment" resultMap="departmentMap">
        select
            d.deptno, d.dname, d.loc, e.empno, e.ename, e.job, e.mgr, e.hiredate, e.sal, e.comm
        from  department d left join employee e on e.deptno = d.deptno where d.deptno = #{deptno}
    </select>


</mapper>